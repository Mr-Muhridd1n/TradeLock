# api/.htaccess fayli
RewriteEngine On

# CORS headers
Header always set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header always set Access-Control-Allow-Headers "Content-Type, Authorization"

# Handle preflight requests
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]

# API routing
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?request=$1 [QSA,L]

# Logs papkasini himoya qilish
<Directory "logs">
    Order deny,allow
    Deny from all
</Directory>

# PHP error log settings
php_value log_errors On
php_value error_log "logs/php_errors.log"

#==========================================
# logs/.htaccess fayli (logs papkasida yarating)
Order deny,allow
Deny from all

#==========================================
# logs/app.log fayli uchun (bo'sh fayl yarating)
# Bu fayl avtomatik yaratiladi, lekin qo'lda ham yaratish mumkin

#==========================================
# Serverda quyidagi buyruqlarni ishlatib papka yarating:
# mkdir -p /www/wwwroot/mr-muhridd1n.uz/api/logs
# touch /www/wwwroot/mr-muhridd1n.uz/api/logs/app.log
# chmod 755 /www/wwwroot/mr-muhridd1n.uz/api/logs
# chmod 644 /www/wwwroot/mr-muhridd1n.uz/api/logs/app.log